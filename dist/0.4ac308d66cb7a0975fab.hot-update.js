exports.id=0,exports.modules={15:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),s=(r(o(16)),r(o(2)));o(17);o(3),o(5);function r(e){return e&&e.__esModule?e:{default:e}}var a=o(6);var i=function(e){function t(e,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));return console.log("context的值是：",n.props.staticContext),n.state={issues:n.props.staticContext.records},n.setFilter=n.setFilter.bind(n),n.selectPage=n.selectPage.bind(n),n.deleteIssue=n.deleteIssue.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),n(t,[{key:"selectPage",value:function(e){var t=Object.assign(this.props.location.query,{_page:e});this.props.router.push({pathname:this.props.location.pathname,query:t})}},{key:"deleteIssue",value:function(e){var t=this;console.log("user want to delelte me```"),fetch("/api/issues/"+e,{method:"DELETE"}).then(function(e){console.log("the response data is: ",e),e.ok?(console.log("start loaddata```"),t.loadData(t.props.location.search)):t.props.showError("Failed to delete issue")})}},{key:"componentDidMount",value:function(){console.log("开始执行请求函数"),this.loadData(this.props.location.search)}},{key:"componentDidUpdate",value:function(e,t){var o=e.location.search,n=this.props.location.search;console.log("以前的数据是: ",o),console.log("现在的数据是: ",n),o!==n&&(console.log("the search is: ",this.props.location.search),this.loadData(this.props.location.search))}},{key:"setFilter",value:function(e){console.log("this.props.history is 1: ",this.props.history),this.props.history.replace("/issues?"+a.stringify(e)),console.log("url即将替换为：","/issues?"+a.stringify(e)),console.log("this.props.history is 2: ",this.props.history)}},{key:"loadData",value:function(e){var t=this;console.log("开始请求原始数据"),console.log(this.props.location),console.log("qqqqqq: ",e),fetch("/api/issues"+e).then(function(e){console.log("原始数据请求成功: ",e),e.ok?(console.log("返回的response数据是： ",e),e.json().then(function(e){console.log("请求的数据调回: ",e),e.records.forEach(function(e){e.created=new Date(e.created),e.completionDate&&(e.completionDate=new Date(e.completionDate))}),console.log("最后需要渲染的数据数据:",e.records),t.setState({issues:e.records})})):e.json().then(function(e){alert("Failed")})}).catch(function(e){alert("Error")})}},{key:"createIssue",value:function(e){var t=this;console.log("触发post请求"),fetch("/api/issues",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){console.log("here 1: "+e),e.created=new Date(e.created),console.log(e.created),e.completionDate&&(e.completionDate=new Date(e.completionDate));var o=t.state.issues.concat(e);console.log(o),t.setState({issues:o})}).catch(function(e){alert(e.message)})}},{key:"render",value:function(){return s.default.createElement("div",null,this.props.staticContext.i.metadata.totalCount)}}]),t}();t.default=i}};
//# sourceMappingURL=0.4ac308d66cb7a0975fab.hot-update.js.map