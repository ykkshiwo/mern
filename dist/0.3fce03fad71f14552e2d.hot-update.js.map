{"version":3,"sources":["webpack:///./server/renderedPageRouter.jsx"],"names":["__webpack_require__","_server","_reactRouter","_reactRouterDom","renderedPageRouter","Router","test","_react2","default","createElement","get","req","res","console","log","url","routes","props","children","html","renderToString","StaticRouter","location","Route","exact","path","component","status","send","_template2"],"mappings":"+GAAA,QAAAA,EAAA,IACAC,EAAAD,EAAA,IACAE,EAAAF,EAAA,QAEAA,EAAA,QAEAA,EAAA,SACAA,EAAA,KAEAG,KADAH,EAAA,KACAA,EAAA,uDAEA,IAAMI,EAAqB,IAAIC,UACzBC,EAAO,kBAAMC,EAAAC,QAAAC,cAAA,0BAEnBL,EAAmBM,IAAI,IAAK,SAACC,EAAKC,GAChCC,QAAQC,IAAI,WACZD,QAAQC,IAAIH,EAAII,KAEhBF,QAAQC,IAAIE,UAAOC,MAAMC,SAASD,MAAMC,UAExC,IAAMC,GAAO,EAAAlB,EAAAmB,gBACXb,EAAAC,QAAAC,cAACP,EAAAmB,aAAD,CAAcC,SAAUX,EAAII,KAE1BR,EAAAC,QAAAC,cAACN,EAAAoB,MAAD,CAAOC,OAAA,EAAMC,KAAK,QAAQC,UAAWpB,MAGzCM,EAAIe,OAAO,KAAKC,MAAK,EAAAC,EAAArB,SAASW,gBAiCjBf","file":"0.3fce03fad71f14552e2d.hot-update.js","sourcesContent":["import React from 'react';\r\nimport { renderToString } from 'react-dom/server';\r\nimport { StaticRouter } from 'react-router';\r\n\r\nimport Router from 'express';\r\n\r\nimport template from './template.js';\r\nimport routes from '../src/Routes.jsx';\r\nimport ContextWrapper from '../src/ContextWrapper.jsx';\r\nimport { hashHistory, HashRouter, Redirect, withRouter, Route, BrowserRouter, history, Switch } from 'react-router-dom';\r\n\r\nconst renderedPageRouter = new Router();\r\nconst test = () => <p>Page is test</p>;\r\n\r\nrenderedPageRouter.get('*', (req, res) => {\r\n  console.log(\"服务器启用成功\");\r\n  console.log(req.url);\r\n  // console.log(routes);\r\n  console.log(routes.props.children.props.children);\r\n  // res.send(\"test now...\");\r\n  const html = renderToString(\r\n    <StaticRouter location={req.url} >\r\n      {/* <routes /> */}\r\n      <Route exact path='/test' component={test} ></Route>\r\n    </StaticRouter>\r\n  );\r\n  res.status(200).send(template(html));\r\n  // matchPath({ routes, location: req.url }, (error, redirectLocation, renderProps) => {\r\n  //   if (error) {\r\n  //     res.status(500).send(error.message);\r\n  //   } else if (redirectLocation) {\r\n  //     res.redirect(302, redirectLocation.pathname + redirectLocation.search);\r\n  //   } else if (renderProps) {\r\n  //     const componentsWithData = renderProps.components.filter(c => c.dataFetcher);\r\n  //     const dataFetchers = componentsWithData.map(c => c.dataFetcher({\r\n  //       params: renderProps.params, location: renderProps.location,\r\n  //       urlBase: 'http://localhost:3000', cookie: req.headers.cookie,\r\n  //     }));\r\n  //     Promise.all(dataFetchers).then((dataList) => {\r\n  //       let initialState = {};\r\n  //       dataList.forEach((namedData) => {\r\n  //         initialState = Object.assign(initialState, namedData);\r\n  //       });\r\n  //       const html = renderToString(\r\n  //         <ContextWrapper initialState={initialState} >\r\n  //           <RouterContext {...renderProps} />\r\n  //         </ContextWrapper>\r\n  //       );\r\n  //       res.status(200).send(template(html, initialState));\r\n  //     })\r\n  //     .catch(err => {\r\n  //       console.log(`Error rendering to string: ${err}`);\r\n  //     });\r\n  //   } else {\r\n  //     res.status(404).send('Not found');\r\n  //   }\r\n  // });\r\n});\r\n\r\nexport default renderedPageRouter;\r\n"],"sourceRoot":""}