!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){function t(e){var t=require("./"+e+"."+r+".hot-update.js");!function(e,t){if(!E[e]||!b[e])return;for(var n in b[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(h[n]=t[n]);0==--y&&0===v&&j()}(t.id,t.modules)}var n,o=!0,r="9f9724ce793aec78a8f7",a={},s=[],l=[];function i(e){var t=k[e];if(!t)return S;var o=function(o){return t.hot.active?(k[o]?-1===k[o].parents.indexOf(e)&&k[o].parents.push(e):(s=[e],n=o),-1===t.children.indexOf(o)&&t.children.push(o)):(console.warn("[HMR] unexpected require("+o+") from disposed module "+e),s=[]),S(o)},r=function(e){return{configurable:!0,enumerable:!0,get:function(){return S[e]},set:function(t){S[e]=t}}};for(var a in S)Object.prototype.hasOwnProperty.call(S,a)&&"e"!==a&&"t"!==a&&Object.defineProperty(o,a,r(a));return o.e=function(e){return"ready"===f&&d("prepare"),v++,S.e(e).then(t,function(e){throw t(),e});function t(){v--,"prepare"===f&&(g[e]||O(e),0===v&&0===y&&j())}},o.t=function(e,t){return 1&t&&(e=o(e)),S.t(e,-2&t)},o}function u(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var o=0;o<e.length;o++)t._acceptedDependencies[e[o]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:w,apply:C,status:function(e){if(!e)return f;c.push(e)},addStatusHandler:function(e){c.push(e)},removeStatusHandler:function(e){var t=c.indexOf(e);t>=0&&c.splice(t,1)},data:a[e]};return n=void 0,t}var c=[],f="idle";function d(e){f=e;for(var t=0;t<c.length;t++)c[t].call(null,e)}var p,h,m,y=0,v=0,g={},b={},E={};function _(e){return+e+""===e?+e:e}function w(e){if("idle"!==f)throw new Error("check() is only allowed in idle status");return o=e,d("check"),function(){try{var e=require("./"+r+".hot-update.json")}catch(e){return Promise.resolve()}return Promise.resolve(e)}().then(function(e){if(!e)return d("idle"),null;b={},g={},E=e.c,m=e.h,d("prepare");var t=new Promise(function(e,t){p={resolve:e,reject:t}});h={};return O(0),"prepare"===f&&0===v&&0===y&&j(),t})}function O(e){E[e]?(b[e]=!0,y++,t(e)):g[e]=!0}function j(){d("ready");var e=p;if(p=null,e)if(o)Promise.resolve().then(function(){return C(o)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&t.push(_(n));e.resolve(t)}}function C(t){if("ready"!==f)throw new Error("apply() is only allowed in ready status");var n,o,l,i,u;function c(e){for(var t=[e],n={},o=t.slice().map(function(e){return{chain:[e],id:e}});o.length>0;){var r=o.pop(),a=r.id,s=r.chain;if((i=k[a])&&!i.hot._selfAccepted){if(i.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:a};if(i.hot._main)return{type:"unaccepted",chain:s,moduleId:a};for(var l=0;l<i.parents.length;l++){var u=i.parents[l],c=k[u];if(c){if(c.hot._declinedDependencies[a])return{type:"declined",chain:s.concat([u]),moduleId:a,parentId:u};-1===t.indexOf(u)&&(c.hot._acceptedDependencies[a]?(n[u]||(n[u]=[]),p(n[u],[a])):(delete n[u],t.push(u),o.push({chain:s.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];-1===e.indexOf(o)&&e.push(o)}}t=t||{};var y={},v=[],g={},b=function(){console.warn("[HMR] unexpected require("+O.moduleId+") to disposed module")};for(var w in h)if(Object.prototype.hasOwnProperty.call(h,w)){var O;u=_(w);var j=!1,C=!1,P=!1,D="";switch((O=h[w]?c(u):{type:"disposed",moduleId:w}).chain&&(D="\nUpdate propagation: "+O.chain.join(" -> ")),O.type){case"self-declined":t.onDeclined&&t.onDeclined(O),t.ignoreDeclined||(j=new Error("Aborted because of self decline: "+O.moduleId+D));break;case"declined":t.onDeclined&&t.onDeclined(O),t.ignoreDeclined||(j=new Error("Aborted because of declined dependency: "+O.moduleId+" in "+O.parentId+D));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(O),t.ignoreUnaccepted||(j=new Error("Aborted because "+u+" is not accepted"+D));break;case"accepted":t.onAccepted&&t.onAccepted(O),C=!0;break;case"disposed":t.onDisposed&&t.onDisposed(O),P=!0;break;default:throw new Error("Unexception type "+O.type)}if(j)return d("abort"),Promise.reject(j);if(C)for(u in g[u]=h[u],p(v,O.outdatedModules),O.outdatedDependencies)Object.prototype.hasOwnProperty.call(O.outdatedDependencies,u)&&(y[u]||(y[u]=[]),p(y[u],O.outdatedDependencies[u]));P&&(p(v,[O.moduleId]),g[u]=b)}var F,x=[];for(o=0;o<v.length;o++)u=v[o],k[u]&&k[u].hot._selfAccepted&&x.push({module:u,errorHandler:k[u].hot._selfAccepted});d("dispose"),Object.keys(E).forEach(function(e){!1===E[e]&&function(e){delete installedChunks[e]}(e)});for(var M,T,I=v.slice();I.length>0;)if(u=I.pop(),i=k[u]){var q={},R=i.hot._disposeHandlers;for(l=0;l<R.length;l++)(n=R[l])(q);for(a[u]=q,i.hot.active=!1,delete k[u],delete y[u],l=0;l<i.children.length;l++){var V=k[i.children[l]];V&&((F=V.parents.indexOf(u))>=0&&V.parents.splice(F,1))}}for(u in y)if(Object.prototype.hasOwnProperty.call(y,u)&&(i=k[u]))for(T=y[u],l=0;l<T.length;l++)M=T[l],(F=i.children.indexOf(M))>=0&&i.children.splice(F,1);for(u in d("apply"),r=m,g)Object.prototype.hasOwnProperty.call(g,u)&&(e[u]=g[u]);var N=null;for(u in y)if(Object.prototype.hasOwnProperty.call(y,u)&&(i=k[u])){T=y[u];var H=[];for(o=0;o<T.length;o++)if(M=T[o],n=i.hot._acceptedDependencies[M]){if(-1!==H.indexOf(n))continue;H.push(n)}for(o=0;o<H.length;o++){n=H[o];try{n(T)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:u,dependencyId:T[o],error:e}),t.ignoreErrored||N||(N=e)}}}for(o=0;o<x.length;o++){var A=x[o];u=A.module,s=[u];try{S(u)}catch(e){if("function"==typeof A.errorHandler)try{A.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:n,originalError:e}),t.ignoreErrored||N||(N=n),N||(N=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:u,error:e}),t.ignoreErrored||N||(N=e)}}return N?(d("fail"),Promise.reject(N)):(d("idle"),new Promise(function(e){e(v)}))}var k={};function S(t){if(k[t])return k[t].exports;var n=k[t]={i:t,l:!1,exports:{},hot:u(t),parents:(l=s,s=[],l),children:[]};return e[t].call(n.exports,n,n.exports,i(t)),n.l=!0,n.exports}return S.m=e,S.c=k,S.d=function(e,t,n){S.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},S.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},S.t=function(e,t){if(1&t&&(e=S(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(S.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)S.d(n,o,function(t){return e[t]}.bind(null,o));return n},S.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return S.d(t,"a",t),t},S.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},S.p="",S.h=function(){return r},i(16)(S.s=16)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("react-bootstrap")},function(e,t){e.exports=require("mongodb")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDb=t.app=void 0;var o,r=n(20),a=(o=r)&&o.__esModule?o:{default:o};var s=n(5),l=n(33),i=(n(34),n(3).MongoClient,n(35)),u=n(3),c=n(36),f=s();f.use(s.static("statics")),f.use(s.static("../node_modules/bootstrap/dist/css/")),f.use(l.json()),f.get("/app.js",function(e,t){console.log(i.resolve("static"))}),f.get("/api/issues",function(e,t){var n={};if(e.query.status&&(n.status=e.query.status),(e.query.effort_lte||e.query.effort_gte)&&(n.effort={}),e.query.effort_lte&&(n.effort.$lte=parseInt(e.query.effort_lte,10)),e.query.effort_gte&&(n.effort.$gte=parseInt(e.query.effort_gte,10)),e.query.search&&(n.$text={$search:e.query.search}),void 0===e.query._summary){var o=e.query._offset?parseInt(e.query._offset,10):0,r=e.query._limit?parseInt(e.query._limit,10):20;r>50&&(r=50);var a=d.collection("issues").find(n).sort({_id:1}).skip(o).limit(r),s=void 0;a.count(!1).then(function(e){return s=e,a.toArray()}).then(function(e){console.log("查询出的数据： ",e),t.json({metadata:{totalCount:s},records:e})}).catch(function(e){console.log(e),t.status(500).json({message:"Internal Server Error: "+e})})}else d.collection("issues").aggregate([{$match:n},{$group:{_id:{owner:"$owner",status:"$status"},count:{$sum:1}}}]).toArray().then(function(e){var n={};e.forEach(function(e){n[e._id.owner]||(n[e._id.owner]={}),n[e._id.owner][e._id.status]=e.count}),t.json(n)}).catch(function(e){console.log(e),t.status(500).json({message:"Internal Server Error: "+e})})}),f.get("/api/issues/:id",function(e,t){var n=void 0;try{n=u.ObjectId(e.params.id)}catch(e){t.status(422).json({message:"Invalid issue ID : "+e})}d.collection("issues").find({_id:n}).limit(1).next().then(function(e){e?t.json(e):t.status(404).json({message:"No such issue: "+n})}).catch(function(e){console.log(e),t.status(500).json({message:"Invalid server: "+e})})}),f.post("/api/issues",function(e,t){var n=e.body;n.created=new Date,n.status||(n.status="New"),d.collection("issues").insertOne(n).then(function(e){return d.collection("issues").find({_id:e.insertedId}).limit(1).next()}).then(function(e){console.log("添加的数据是： ",e),t.json(e)}).catch(function(e){console.log(e)})}),f.put("/api/issues/:id",function(e,t){var n=void 0;try{n=u.ObjectId(e.params.id)}catch(e){return void t.status(422).json({message:"Invalid issue ID format: "+e})}var o=e.body;delete o._id;var r=c.validateIssue(o);r?t.status(422).json({message:"Invalid request: "+r}):(console.log("Update immed..."),console.log(c.convertIssue(o)),d.collection("issues").update({_id:n},c.convertIssue(o)).then(function(e){return d.collection("issues").find({_id:n}).limit(1).next()}).then(function(e){console.log("保存的东西： ",e),t.json(e)}).catch(function(e){console.log(e),t.status(500).json({message:"Internal Server Error: "+e})}))}),f.delete("/api/issues/:id",function(e,t){console.log("server will delete..."),console.log("delete id is: ",e.params.id);var n=void 0;try{n=u.ObjectId(e.params.id),console.log("now delete data...",n)}catch(e){return void t.status(422).json({message:"Invalid issue ID format: "+e})}d.collection("issues").deleteOne({_id:n}).then(function(e){1===e.result.n?t.json({status:"OK"}):t.json({status:"Warning: object not found"})}).catch(function(e){console.log(e),t.status(500).json({message:"Internal Server Error: "+e})})}),f.use("/",a.default);var d=void 0;t.app=f,t.setDb=function(e){d=e}},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("babel-polyfill")},function(e,t){e.exports=require("react-dom")},function(e,t){e.exports=require("react-router-bootstrap")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=c(n(0)),a=(n(1),n(26),n(2)),s=n(8),l=c(n(27)),i=c(n(28)),u=c(n(10));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={issue:{_id:"",title:"",status:"",owner:"",effort:"",completionDate:"",created:null,toastVisible:!1,toastMessage:"",toastType:"success"},invalidFields:{},showingValidation:!1},e.onChange=e.onChange.bind(e),e.onValidityChange=e.onValidityChange.bind(e),e.onSubmit=e.onSubmit.bind(e),e.showValidation=e.showValidation.bind(e),e.dismissValidation=e.dismissValidation.bind(e),e.showSuccess=e.showSuccess.bind(e),e.showError=e.showError.bind(e),e.dismissToast=e.dismissToast.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.showValidation(),0===Object.keys(this.state.invalidFields).length&&fetch("/api/issues/"+this.props.match.params.id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.state.issue)}).then(function(e){console.log(e),e.ok?(t.showSuccess("我赢了。"),console.log("发送回来的是："),e.json().then(function(e){console.log(e),e.created=new Date(e.created),e.completionDate&&(e.completionDate=new Date(e.completionDate)),t.setState({issue:e}),alert("我赢了。"),console.log("win"),t.showSuccess("我赢了。")})):e.json().then(function(e){t.props.showError("Failed to update issue: "+e.message),alert("失败")})}).catch(function(e){t.props.showError("Error in sending data to server: "+e.message)})}},{key:"showValidation",value:function(){this.setState({showingValidation:!0})}},{key:"dismissValidation",value:function(){this.setState({showValidation:!1})}},{key:"showSuccess",value:function(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"success"})}},{key:"showError",value:function(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"danger"})}},{key:"dismissToast",value:function(){this.setState({toastVisible:!1})}},{key:"onValidityChange",value:function(e,t){var n=Object.assign({},this.state.invalidFields);t?delete n[e.target.name]:n[e.target.name]=!0,this.setState({invalidFields:n})}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(e){e.match.params.id!==this.props.match.params.id&&this.loadData()}},{key:"onChange",value:function(e,t){console.log("change is now from ....");var n=Object.assign({},this.state.issue),o=void 0!==t?t:e.target.value;console.log("the value time is: ",o),n[e.target.name]=o,console.log("the father issueEdit issue is: ",n),this.setState({issue:n})}},{key:"loadData",value:function(){var e=this;fetch("/api/issues/"+this.props.match.params.id).then(function(t){t.ok?t.json().then(function(t){t.created=new Date(t.created),t.completionDate=null!=t.completionDate?new Date(t.completionDate):null,e.setState({issue:t})}):t.json().then(function(e){alert("Failed to fetch issue; "+e.message)})}).catch(function(e){alert("Error in fetch data from Server: "+error.message)})}},{key:"render",value:function(){var e=this.state.issue,t=null;return 0!==Object.keys(this.state.invalidFields).length&&this.state.showingValidation&&(t=r.default.createElement(a.Alert,{bsStyle:"danger",onDismiss:this.dismissValidation},"Please correct invalid fields before submitting.")),r.default.createElement(a.Panel,{header:"Edit Issue"},r.default.createElement(a.Form,{horizontal:!0,onSubmit:this.onSubmit},r.default.createElement(a.FormGroup,null,r.default.createElement(a.Col,{componentClass:a.ControlLabel,sm:3},"ID"),r.default.createElement(a.Col,{sm:9},r.default.createElement(a.FormControl.Static,null,e._id))),r.default.createElement(a.FormGroup,null,r.default.createElement(a.Col,{componentClass:a.ControlLabel,sm:3},"Created"),r.default.createElement(a.Col,{sm:9},r.default.createElement(a.FormControl.Static,null,e.created?e.created.toDateString():""))),r.default.createElement(a.FormGroup,null,r.default.createElement(a.Col,{componentClass:a.ControlLabel,sm:3},"Status"),r.default.createElement(a.Col,{sm:9},r.default.createElement(a.FormControl,{componentClass:"select",name:"status",value:e.status,onChange:this.onChange},r.default.createElement("option",{value:"New"},"New"),r.default.createElement("option",{value:"Open"},"Open"),r.default.createElement("option",{value:"Assigned"},"Assigned"),r.default.createElement("option",{value:"Fixed"},"Fixed"),r.default.createElement("option",{value:"Verified"},"Verified"),r.default.createElement("option",{value:"Closed"},"Closed")))),r.default.createElement(a.FormGroup,null,r.default.createElement(a.Col,{componentClass:a.ControlLabel,sm:3},"Owner"),r.default.createElement(a.Col,{sm:9},r.default.createElement(a.FormControl,{name:"owner",value:e.owner,onChange:this.onChange}))),r.default.createElement(a.FormGroup,null,r.default.createElement(a.Col,{componentClass:a.ControlLabel,sm:3},"Effort"),r.default.createElement(a.Col,{sm:9},r.default.createElement(a.FormControl,{componentClass:l.default,name:"effort",value:e.effort,onChange:this.onChange}))),r.default.createElement(a.FormGroup,{validationState:this.state.invalidFields.completionDate?"error":null},r.default.createElement(a.Col,{componentClass:a.ControlLabel,sm:3},"Completion Date"),r.default.createElement(a.Col,{sm:9},r.default.createElement(a.FormControl,{componentClass:i.default,name:"completionDate",value:e.completionDate,onChange:this.onChange,onValidityChange:this.onValidityChange}),r.default.createElement(a.FormControl.Feedback,null))),r.default.createElement(a.FormGroup,null,r.default.createElement(a.Col,{componentClass:a.ControlLabel,sm:3},"Title"),r.default.createElement(a.Col,{sm:9},r.default.createElement(a.FormControl,{name:"title",value:e.title,onChange:this.onChange}))),r.default.createElement(a.FormGroup,null,r.default.createElement(a.Col,{smOffset:3,sm:6},r.default.createElement(a.ButtonToolbar,null,r.default.createElement(a.Button,{bsStyle:"primary",type:"submit"},"Submit"),r.default.createElement(s.LinkContainer,{to:"/issues"},r.default.createElement(a.Button,{bsStyle:"link"},"Back"))))),r.default.createElement(a.FormGroup,null,r.default.createElement(a.Col,{smOffset:3,sm:9,lgOffset:6,lg:3},t))),r.default.createElement(u.default,{showing:this.state.toastVisible,message:this.state.toastMessage,onDismiss:this.dismissToast,bsStyle:this.state.toastType}))}}]),t}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(0),s=(o=a)&&o.__esModule?o:{default:o},l=n(2);var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),r(t,[{key:"componentDidUpdate",value:function(){this.props.showing&&(clearTimeout(this.dismissTimer),this.dismissTimer=setTimeout(this.props.onDismiss,5e3))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.dismissTimer)}},{key:"render",value:function(){return s.default.createElement(l.Collapse,{in:this.props.showing},s.default.createElement("div",{style:{position:"fixed",top:30,left:0,right:0,textAlign:"center"}},s.default.createElement(l.Alert,{style:{display:"inline-block",width:500},bsStyle:this.props.bsStyle,onDismiss:this.props.onDismiss},this.props.message)))}}]),t}();t.default=i},function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=i(n(12)),a=i(n(0));n(29);var s=n(1),l=n(2);function i(e){return e&&e.__esModule?e:{default:e}}var u=n(13),c=function(e){return a.default.createElement("tr",null,a.default.createElement("td",null,a.default.createElement(s.Link,{to:"/issues/"+e.issue._id},e.issue._id.substr(-4))),a.default.createElement("td",null,e.issue.status),a.default.createElement("td",null,e.issue.owner),a.default.createElement("td",null,e.issue.created.toDateString()),a.default.createElement("td",null,e.issue.effort),a.default.createElement("td",null,e.issue.completionDate?e.issue.completionDate.toDateString():""),a.default.createElement("td",null,e.issue.title),a.default.createElement("td",null,a.default.createElement("span",{onClick:function(){e.deleteIssue(e.issue._id)},className:"glyphicon glyphicon-trash"})))};function f(e){var t=e.issues.map(function(t){return a.default.createElement(c,{key:t._id,issue:t,deleteIssue:e.deleteIssue})});return a.default.createElement(l.Table,{condensed:!0,hover:!0,responsive:!0,bordered:!0},a.default.createElement("thead",null,a.default.createElement("tr",null,a.default.createElement("th",null,"Id"),a.default.createElement("th",null,"Status"),a.default.createElement("th",null,"Owner"),a.default.createElement("th",null,"Created"),a.default.createElement("th",null,"Effort"),a.default.createElement("th",null,"Completion Date"),a.default.createElement("th",null,"Title"),a.default.createElement("th",null))),a.default.createElement("tbody",null,t))}!function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return console.log("context的值是：",n),o.state={issues:[]},o.setFilter=o.setFilter.bind(o),o.selectPage=o.selectPage.bind(o),o.deleteIssue=o.deleteIssue.bind(o),o}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(t,a.default.Component),o(t,null,[{key:"dataFetcher",value:function(e){var t=e.urlBase,n=e.location,o=Object.assign({},n.query),r=o._page;r&&(delete o._page,o._offset=10*(parseInt(r,10)-1)),o._limit=10;var a=Object.keys(o).map(function(e){return e+"="+o[e]}).join("&");return fetch((t||"")+"/api/issues?"+a).then(function(e){return e.ok?e.json().then(function(e){return{IssueList:e}}):e.json().then(function(e){return Promise.reject(e)})})}}]),o(t,[{key:"selectPage",value:function(e){var t=Object.assign(this.props.location.query,{_page:e});this.props.router.push({pathname:this.props.location.pathname,query:t})}},{key:"deleteIssue",value:function(e){var t=this;console.log("user want to delelte me```"),fetch("/api/issues/"+e,{method:"DELETE"}).then(function(e){console.log("the response data is: ",e),e.ok?(console.log("start loaddata```"),t.loadData(t.props.location.search)):t.props.showError("Failed to delete issue")})}},{key:"componentDidMount",value:function(){console.log("开始执行请求函数"),this.loadData(this.props.location.search)}},{key:"componentDidUpdate",value:function(e,t){var n=e.location.search,o=this.props.location.search;console.log("以前的数据是: ",n),console.log("现在的数据是: ",o),n!==o&&(console.log("the search is: ",this.props.location.search),this.loadData(this.props.location.search))}},{key:"setFilter",value:function(e){console.log("this.props.history is 1: ",this.props.history),this.props.history.replace("/issues?"+u.stringify(e)),console.log("url即将替换为：","/issues?"+u.stringify(e)),console.log("this.props.history is 2: ",this.props.history)}},{key:"loadData",value:function(e){var t=this;console.log("开始请求原始数据"),console.log(this.props.location),console.log("qqqqqq: ",e),fetch("/api/issues"+e).then(function(e){console.log("原始数据请求成功: ",e),e.ok?(console.log("返回的response数据是： ",e),e.json().then(function(e){console.log("请求的数据调回: ",e),e.records.forEach(function(e){e.created=new Date(e.created),e.completionDate&&(e.completionDate=new Date(e.completionDate))}),console.log("最后需要渲染的数据数据:",e.records),t.setState({issues:e.records})})):e.json().then(function(e){alert("Failed")})}).catch(function(e){alert("Error")})}},{key:"createIssue",value:function(e){var t=this;console.log("触发post请求"),fetch("/api/issues",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){console.log("here 1: "+e),e.created=new Date(e.created),console.log(e.created),e.completionDate&&(e.completionDate=new Date(e.completionDate));var n=t.state.issues.concat(e);console.log(n),t.setState({issues:n})}).catch(function(e){alert(e.message)})}},{key:"render",value:function(){return a.default.createElement("div",null,a.default.createElement("h1",null,"This is ykk's place."),a.default.createElement(l.Panel,{header:"Filter"},a.default.createElement(r.default,{setFilter:this.setFilter,choosePars:this.choosePars,initFilter:this.props.location.search})),a.default.createElement(f,{issues:this.state.issues,deleteIssue:this.deleteIssue}),a.default.createElement("hr",null))}}])}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(0),s=(o=a)&&o.__esModule?o:{default:o},l=(n(1),n(2));var i=n(13),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));console.log("输出：",e);var o={};return n.params=i.parseUrl(e.initFilter).query,console.log("输出 params : ",o),n.state={status:o.status||"",effort_gte:o.effort_gte||"",effort_lte:o.effort_lte||"",change:!1},console.log("输出 this.state : ",n.state),n.onChangeStatus=n.onChangeStatus.bind(n),n.onChangeEffortGte=n.onChangeEffortGte.bind(n),n.onChangeEffortLte=n.onChangeEffortLte.bind(n),n.clearFilter=n.clearFilter.bind(n),n.applyFilter=n.applyFilter.bind(n),n.resetFilter=n.resetFilter.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),r(t,[{key:"componentWillReceiveProps",value:function(e){console.log("输出 newProps：",e),this.setState({status:this.params.status||"",effort_gte:this.params.effort_gte||"",effort_lte:this.params.effort_lte||"",changed:!1})}},{key:"resetFilter",value:function(){this.setState({status:this.params.status||"",effort_gte:this.params.effort_gte||"",effort_lte:this.params.effort_lte||"",changed:!1})}},{key:"applyFilter",value:function(){var e={};this.state.status&&(e.status=this.state.status),this.state.effort_gte&&(e.effort_gte=this.state.effort_gte),this.state.effort_lte&&(e.effort_lte=this.state.effort_lte),console.log("提交上去的数据：",e),this.props.setFilter(e)}},{key:"clearFilter",value:function(e){this.props.setFilter({})}},{key:"onChangeStatus",value:function(e){console.log("选择器在变化：",e),this.setState({status:e.target.value,changed:!0})}},{key:"onChangeEffortGte",value:function(e){var t=e.target.value;console.log("gte在变化：",t),t.match(/^\d*$/)&&this.setState({effort_gte:e.target.value,changed:!0})}},{key:"onChangeEffortLte",value:function(e){var t=e.target.value;console.log("lte在变化：",t),t.match(/^\d*$/)&&this.setState({effort_lte:e.target.value,changed:!0})}},{key:"render",value:function(){return s.default.createElement(l.Row,null,s.default.createElement(l.Col,{xs:6,sm:4,md:3,lg:2},s.default.createElement(l.FormGroup,null,s.default.createElement(l.ControlLabel,null,"Status"),s.default.createElement(l.FormControl,{componentClass:"select",value:this.state.status,onChange:this.onChangeStatus},s.default.createElement("option",{value:""},"(Any)"),s.default.createElement("option",{value:"New"},"New"),s.default.createElement("option",{value:"Open"},"Open"),s.default.createElement("option",{value:"Assigned"},"Assigned"),s.default.createElement("option",{value:"Fixed"},"Fixed"),s.default.createElement("option",{value:"Verified"},"Verified"),s.default.createElement("option",{value:"Closed"},"Closed")))),s.default.createElement(l.Col,{xs:6,sm:4,md:3,lg:2},s.default.createElement(l.FormGroup,null,s.default.createElement(l.ControlLabel,null,"Effort"),s.default.createElement(l.InputGroup,null,s.default.createElement(l.FormControl,{value:this.state.effort_gte,onChange:this.onChangeEffortGte}),s.default.createElement(l.InputGroup.Addon,null,"-"),s.default.createElement(l.FormControl,{value:this.state.effort_lte,onChange:this.onChangeEffortLte})))),s.default.createElement(l.Col,{xs:6,sm:4,md:3,lg:2},s.default.createElement(l.FormGroup,null,s.default.createElement(l.ControlLabel,null," "),s.default.createElement(l.ButtonToolbar,null,s.default.createElement(l.Button,{bsStyle:"primary",onClick:this.applyFilter},"Apply"),s.default.createElement(l.Button,{onClick:this.resetFilter,disabled:!this.state.changed},"Reset"),s.default.createElement(l.Button,{onClick:this.clearFilter},"Clear")))))}}]),t}();t.default=u},function(e,t){e.exports=require("query-string")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),a=n(2),s=l(n(12));l(n(31));function l(e){return e&&e.__esModule?e:{default:e}}var i=["New","Open","Assigned","Fixed","Verified","Closed"],u=function(e){return r.default.createElement("tr",null,r.default.createElement("td",null,e.owner),i.map(function(t,n){return r.default.createElement("td",{key:n},e.counts[t])}))},c=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.state={stats:123},o.setFilter=o.setFilter.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,null,[{key:"dataFetcher",value:function(e){var t=e.urlBase,n=e.location,o=n.search?n.search+"&_summary":"?_summary";return fetch((t||"")+"/api/issues"+o).then(function(e){return e.ok?e.json().then(function(e){return{IssueReport:e}}):e.json().then(function(e){return Promise.reject(e)})})}}]),o(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(e){var t=e.location.search,n=this.props.location.search;t.status===n.status&&t.effort_gte===n.effort_gte&&t.effort_lte===n.effort_lte||this.loadData()}},{key:"setFilter",value:function(e){this.props.router.push({pathname:this.props.location.pathname,search:search})}},{key:"loadData",value:function(){var e=this;t.dataFetcher({location:this.props.location}).then(function(t){e.setState({stats:t.IssueReport})}).catch(function(t){e.props.showError("Error in fetching data from server: "+t)})}},{key:"render",value:function(){var e=this;return r.default.createElement("div",null,r.default.createElement(a.Panel,{collapsible:!0,header:"Filter"},r.default.createElement(s.default,{setFilter:this.setFilter,initFilter:this.props.location.search})),r.default.createElement(a.Table,{bordered:!0,condensed:!0,hover:!0,responsive:!0},r.default.createElement("thead",null,r.default.createElement("tr",null,r.default.createElement("th",null),i.map(function(e,t){return r.default.createElement("td",{key:t},e)}))),r.default.createElement("tbody",null,Object.keys(this.state.stats).map(function(t,n){return r.default.createElement(u,{key:n,owner:t,counts:e.state.stats[t]})}))))}}]),t}();t.default=c},function(e,t){var n="info";function o(){}function r(e){return"info"===n&&"info"===e||["info","warning"].indexOf(n)>=0&&"warning"===e||["info","warning","error"].indexOf(n)>=0&&"error"===e}function a(e){return function(t,n){r(t)&&e(n)}}e.exports=function(e,t){r(e)&&("info"===e?console.log(t):"warning"===e?console.warn(t):"error"===e&&console.error(t))};var s=console.group||o,l=console.groupCollapsed||o,i=console.groupEnd||o;e.exports.group=a(s),e.exports.groupCollapsed=a(l),e.exports.groupEnd=a(i),e.exports.setLogLevel=function(e){n=e}},function(e,t,n){n(17),e.exports=n(37)},function(e,t,n){"use strict";var o=s(n(18)),r=s(n(19)),a=n(3);function s(e){return e&&e.__esModule?e:{default:e}}o.default.install();var l=n(4),i=void 0,u=void 0;a.MongoClient.connect("mongodb://127.0.0.1:27017/").then(function(e){i=e.db("issuetracker"),u=r.default.createServer(),l.setDb(i),u.on("request",l.app),u.listen(3e3,function(){console.log("App started on port 3000 哦")})}).catch(function(e){console.log("ERROR:",e)}),e.hot.accept(4,function(){u.removeListener("request",l.app),(l=n(4)).setDb(i),u.on("request",l.app)})},function(e,t){e.exports=require("source-map-support")},function(e,t){e.exports=require("http")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=c(n(0)),s=c(n(21)),l=n(22),i=c(n(5)),u=(c(n(23)),c(n(24)),c(n(32)),n(1));function c(e){return e&&e.__esModule?e:{default:e}}var f=new i.default,d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return console.log("props的值是：",n.props.staticContext),n.state={issues:n.props.staticContext.i.metadata.totalCount},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"render",value:function(){return a.default.createElement("div",null,a.default.createElement("button",null,this.state.issues))}}]),t}(),p=function(){return a.default.createElement("p",null,"Page is test2222222")};f.get("*",function(e,t){console.log("服务器启用成功"),console.log("http://127.0.0.1:3000/api"+e.url),fetch("http://127.0.0.1:3000/api"+e.url).then(function(e){return e.json()}).then(function(n){console.log("从服务器返回的数据：",n);var r={i:n},i=s.default.renderToString(a.default.createElement(l.StaticRouter,{location:e.url,context:r},a.default.createElement(u.Route,o({exact:!0,path:"/issues",component:d},{a:123})),a.default.createElement(u.Route,{exact:!0,path:"/test2",component:p})));t.write('\n    <!doctype html>\n    <div id="app">'+i+"</div>\n  "),t.end()})}),t.default=f},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("react-router")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return'<!DOCTYPE HTML>\n  <html>\n  <head>\n    <meta charset="UTF-8" />\n    <title>Pro MERN Stack</title>\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <link rel="stylesheet" href="/bootstrap.min.css" >\n    <link rel="stylesheet" href="/react-select/react-select.css" >\n    <style>\n      .panel-title a {display: block; width: 100%; cursor: pointer; }\n    </style>\n  </head>\n  \n  <body>\n    <div id="contents">'+e+"</div>    \x3c!-- this is where our component will appear --\x3e\n    <script>window.__INTIAL_STATE__ = "+JSON.stringify(t)+';<\/script>\n    <script src="/vendor.js"><\/script>\n    <script src="/app.js"><\/script>\n    <script src="/config.js"><\/script>\n  </body>\n  \n  </html>\n  '}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=u(n(0));n(6);u(n(7));var r=n(1),a=u(n(25)),s=u(n(11)),l=u(n(9)),i=u(n(14));function u(e){return e&&e.__esModule?e:{default:e}}t.default=o.default.createElement(a.default,null,o.default.createElement(r.Switch,null,o.default.createElement(r.Route,{exact:!0,path:"/issues",component:s.default}),o.default.createElement(r.Route,{exact:!0,path:"/reports",component:i.default}),o.default.createElement(r.Route,{exact:!0,path:"/issues/:id",component:l.default}),o.default.createElement(r.Route,{component:function(){return o.default.createElement("p",null,"Page Not Found")}})))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(6);var o=l(n(0)),r=(l(n(7)),n(1),n(2)),a=n(8),s=(l(n(9)),l(n(11)),l(n(30)));l(n(14));function l(e){return e&&e.__esModule?e:{default:e}}var i=function(){return o.default.createElement(r.Navbar,{fluid:!0},o.default.createElement(r.Navbar.Header,null,o.default.createElement(r.Navbar.Brand,null,"Issue Tracker")),o.default.createElement(r.Nav,null,o.default.createElement(a.LinkContainer,{to:"/issues"},o.default.createElement(r.NavItem,null,"Issues")),o.default.createElement(a.LinkContainer,{to:"/reports"},o.default.createElement(r.NavItem,null,"Reports"))),o.default.createElement(r.Nav,{pullRight:!0},o.default.createElement(s.default,null),o.default.createElement(r.NavDropdown,{id:"user-dropdown",title:o.default.createElement(r.Glyphicon,{glyph:"option-horizontal"}),noCaret:!0},o.default.createElement(r.MenuItem,null,"Logout1"),o.default.createElement(r.MenuItem,null,"Logout2"))))};t.default=function(e){return o.default.createElement("div",null,o.default.createElement(i,null),o.default.createElement("div",{className:"header"},o.default.createElement("h1",null,"Issue Tracker")),o.default.createElement("div",{className:"container-fluid"},e.children,o.default.createElement("hr",null),o.default.createElement("h5",null,o.default.createElement("small",null,"please visit this ",o.default.createElement("a",{href:"https://www.baidu.com"}," here ")))))}},function(e,t){e.exports=require("https")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(0),l=(o=s)&&o.__esModule?o:{default:o};var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={value:n.format(e.value)},n.onBlur=n.onBlur.bind(n),n.onChange=n.onChange.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),a(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({value:this.format(e.value)})}},{key:"onBlur",value:function(e){this.props.onChange(e,this.unformat(this.state.value))}},{key:"onChange",value:function(e){e.target.value.match(/^\d*$/)&&this.setState({value:e.target.value})}},{key:"format",value:function(e){return null!=e?e.toString():""}},{key:"unformat",value:function(e){var t=parseInt(e,10);return isNaN(t)?null:t}},{key:"render",value:function(){return l.default.createElement("input",r({type:"text"},this.props,{value:this.state.value,onBlur:this.onBlur,onChange:this.onChange}))}}]),t}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(0),s=(o=a)&&o.__esModule?o:{default:o};var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={value:n.editFormat(e.value),focused:!1,valid:!0},n.onFocus=n.onFocus.bind(n),n.onBlur=n.onBlur.bind(n),n.onChange=n.onChange.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),r(t,[{key:"componentWillReceiveProps",value:function(e){e.value!==this.props.value&&this.setState({value:this.editFormat(e.value)})}},{key:"onFocus",value:function(){console.log("get focus..."),this.setState({focused:!0})}},{key:"onBlur",value:function(e){console.log("lose focus...");var t=this.unformat(this.state.value);console.log("is: ",this.state.value),console.log("value is: ",t);var n=""===this.state.value||null!=t;console.log("valid date: ",n),n!==this.state.valid&&this.props.onValidityChange&&this.props.onValidityChange(e,n),this.setState({focused:!1,valid:n}),n&&this.props.onChange(e,t)}},{key:"onChange",value:function(e){console.log("changing..."),e.target.value.match(/^[\d-]*$/)&&this.setState({value:e.target.value})}},{key:"displayFormat",value:function(e){return console.log("this format of date is:",e),null!=e?e.toString():""}},{key:"editFormat",value:function(e){return null!=e?e.toString().substr(0,10):""}},{key:"unformat",value:function(e){var t=new Date(e);return isNaN(t.getTime())?null:t}},{key:"render",value:function(){var e=this.state.valid||this.state.focused?null:"invalid",t=this.state.focused||!this.state.valid?this.state.value:this.displayFormat(this.props.value);return delete Object.assign({},this.props).onValidityChange,s.default.createElement("input",{type:"text",size:20,name:this.props.name,className:e,value:t,placeholder:this.state.focused?"yyyy-mm-dd":null,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange})}}]),t}();t.default=l},function(e,t){e.exports=require("isomorphic-fetch")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(0),s=(o=a)&&o.__esModule?o:{default:o},l=n(1),i=n(2);var u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showing:!1,test:"are you"},e.need_close=!1,e.showModals=e.showModals.bind(e),e.hideModal=e.hideModal.bind(e),e.submit=e.submit.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),r(t,[{key:"showModals",value:function(){console.log("点击显示"),console.log(this.need_close),this.need_close?this.need_close=!1:this.setState({showing:!0})}},{key:"hideModal",value:function(){console.log("关掉这个恶心的模态框。"),this.setState({showing:!1}),this.need_close=!0}},{key:"submit",value:function(e){var t=this;e.preventDefault(),this.hideModal(),this.setState({test:"ccc",showing:!1}),console.log(this.state);var n=document.forms.issueAdd,o={owner:n.owner.value,title:n.title.value,status:"New",created:new Date};fetch("/api/issues",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(function(e){e.ok?e.json().then(function(e){t.props.history.replace("/issues/"+e._id)}):e.json().then(function(e){t.props.showError("Failed to add issue: "+e.message)})}).catch(function(e){t.props.showError("Error in sending data to server: "+e.message)})}},{key:"render",value:function(){return s.default.createElement(i.NavItem,{onClick:this.showModals},s.default.createElement(i.Glyphicon,{glyph:"plus"}),"Create Issue",s.default.createElement(i.Modal,{show:this.state.showing,onHide:this.hideModal},s.default.createElement(i.Modal.Header,{closeButton:!0},s.default.createElement(i.Modal.Title,null,"Create Issue")),s.default.createElement(i.Modal.Body,null,s.default.createElement(i.Form,{name:"issueAdd"},s.default.createElement(i.FormGroup,null,s.default.createElement(i.ControlLabel,null,"Title"),s.default.createElement(i.FormControl,{name:"title",autoFocus:!0})),s.default.createElement(i.FormGroup,null,s.default.createElement(i.ControlLabel,null,"Owner"),s.default.createElement(i.FormControl,{name:"owner"})))),s.default.createElement(i.Modal.Footer,null,s.default.createElement(i.Button,{variant:"secondary",onClick:this.hideModal},"Close"),s.default.createElement(i.Button,{variant:"primary",onClick:this.submit},"Save Changes"))))}}]),t}();t.default=(0,l.withRouter)(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.default=function(e){return function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={toastVisible:!1,toastMessage:"",toastType:"success"},t.showSuccess=t.showSuccess.bind(t),t.showError=t.showError.bind(t),t.dismissToast=t.dismissToast.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),r(n,[{key:"showSuccess",value:function(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"success"})}},{key:"showError",value:function(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"danger"})}},{key:"dismissToast",value:function(){this.setState({toastVisible:!1})}},{key:"render",value:function(){return a.default.createElement("div",null,a.default.createElement(e,o({showError:this.showError,showSuccess:this.showSuccess},this.props)),a.default.createElement(s.default,{showing:this.state.toastVisible,message:this.state.toastMessage,onDismiss:this.dismissToast,bsStyle:this.state.toastType}))}}]),n}(a.default.Component)};var a=l(n(0)),s=l(n(10));function l(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(0),s=(o=a)&&o.__esModule?o:{default:o};var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),r(t,[{key:"getChildContext",value:function(){return{initialState:this.props.initialState}}},{key:"render",value:function(){return this.props.children}}]),t}();t.default=l},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("os")},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";var o={New:!0,Open:!0,Assigned:!0,Fixed:!0,Verified:!0,Closed:!0},r={status:"required",owner:"required",effort:"optional",created:"required",completionDate:"optional",title:"required"};function a(e){var t={};return Object.keys(e).forEach(function(n){r[n]&&(t[n]=e[n])}),t}e.exports={convertIssue:function(e){return e.created&&(e.created=new Date(e.created)),e.completionDate&&(e.completionDate=new Date(e.completionDate)),a(e)},validateIssue:function(e){var t=[];return Object.keys(r).forEach(function(n){"required"!==r[n]||e[n]||t.push("Missing mandatory field: "+n)}),o[e.status]||t.push(e.status+" is not a valid status."),t.length?t.join("; "):null},cleanupIssue:a}},function(e,t,n){(function(t){var o=+t.substr(1)||6e5,r=n(15);setInterval(function t(o){"idle"===e.hot.status()&&e.hot.check(!0).then(function(e){e?(n(38)(e,e),t(!0)):o&&r("info","[HMR] Update applied.")}).catch(function(t){var n=e.hot.status();["abort","fail"].indexOf(n)>=0?(r("warning","[HMR] Cannot apply update."),r("warning","[HMR] "+(t.stack||t.message)),r("warning","[HMR] You need to restart the application!")):r("warning","[HMR] Update failed: "+(t.stack||t.message))})},o)}).call(this,"?1000")},function(e,t,n){e.exports=function(e,t){var o=e.filter(function(e){return t&&t.indexOf(e)<0}),r=n(15);(o.length>0&&(r("warning","[HMR] The following modules couldn't be hot updated: (They would need a full reload!)"),o.forEach(function(e){r("warning","[HMR]  - "+e)})),t&&0!==t.length)?(r("info","[HMR] Updated modules:"),t.forEach(function(e){if("string"==typeof e&&-1!==e.indexOf("!")){var t=e.split("!");r.groupCollapsed("info","[HMR]  - "+t.pop()),r("info","[HMR]  - "+e),r.groupEnd("info")}else r("info","[HMR]  - "+e)}),t.every(function(e){return"number"==typeof e})&&r("info","[HMR] Consider using the NamedModulesPlugin for module names.")):r("info","[HMR] Nothing hot updated.")}}]));
//# sourceMappingURL=app.bundle.js.map